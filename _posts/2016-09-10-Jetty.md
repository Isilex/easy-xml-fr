---
layout: post
title: Le Web Server Jetty
---
<div class="texteLong" lang="fr">
            
              <div> <h1>Le serveur Web (jetty)</h1> <p>Le serveur Web d'Isilex est le serveur Web de Basex. C'est un serveur web java basé sur une philosophie d'usage dénommée REST inventée par Roy Fielding dans les années 1990 qui permet d'associer à une URL un algorithme de programmation.</p> <p>Lorsque vous téléchargez Isilex, il est "prêt à l'emploi" sur n'importe quelle plateforme.<br clear="none">Il suffit de le démarrer; vous voyez une petite règle apparaître dans le <em>system tray</em> près de l'horloge: vous cliquez sur "ouvrir Isilex" et voilà ! Vous pouvez commencer à travailler dessus immédiatement. Cela signifie que vous pouvez commencer à saisir des fiches d'annotations, du corpus.</p> <p>Comme il est programmé en java, Basex et sa surcouche Web Isilex, fonctionnent sur n'importe quelle plateforme sans besoin d'installer.</p> <h1>Utiliser Isilex comme serveur Web (8984 ?)</h1> <p>Autrement dit, comment passer du port 8984 au port 80 ? Deux solutions existent: soit vous souhaitez faire de Jetty votre serveur principal. Auquel cas, il faut modifier le servlet dans le fichier de configuration Web.xml du sous répertoire Jetty d'Isilex. Éteindre Isilex; accéder aurépertoire webapp/WEB-INF et ouvrir web.xml avec un éditeur de texte. Modifier le port et redémarrer Isilex. That's it ! isilex est à l'écoute sur le port que vous avez configuré (le port 80 étant le port http).</p> <p>Si, comme cela arrive souvent, votre serveur "tourne" à côté d'un autre serveur plus "classique" comme Apache ou Nginx, alors il faut implémetner une redirection Apache ou Nginx vers le port 8984. Vous trouverez des information<a shape="rect" href="https://www.ghostforbeginners.com/how-to-proxy-port-80-to-2368-for-ghost-with-nginx/"> ici pour Nginx</a>&nbsp;et vous trouverez des informations sur les hôtes virtels&nbsp;<a shape="rect" href="https://httpd.apache.org/docs/trunk/fr/vhosts/examples.html">pour Apache ici</a>.</p> <p>
                  <img style="display: block; margin-left: auto; margin-right: auto;" src="https://isilex.github.io/easy-xml/images/diagram.svg" alt="" width="789" height="522">
                </p> <h1 id="addFunctx">Ajouter des fonctionnalités</h1> <p>La force d'Isilex est d'être un bundle prêt à l'emploi. Mais le chercheur qui serait désireux de travailler en profondeur ses propres applications trouverait très facilement le moyen d'implémenter de nouvelles perspectives.</p> <p>A la racine d'isilex, le chercheur trouvera un répertoire "webapp" contenant un fichier "Additional.xqm". Il suffit alors d'ajouter dans ce fichier les fonctions Rest qui lui permettront d'implémenter ses propres essais (pour en savoir plus sur la syntaxe XQuery des fonctions Rest: <a shape="rect" href="http://docs.basex.org/wiki/Repository">http://docs.basex.org/wiki/Repository</a>).</p> <p>Isilex met enfin à la disposition du chercheur une petite collection de fonctions issues de sa propre bibliothèque. <a shape="rect" href="#fonctionsReady">Quelles fonctionnalités ?</a>
                </p> <p>Pour créer une page "Hello World", il suffit donc d'ouvrir le fichier additional.xqm, de se placer à la fin et d'ajouter les linges de code suivantes:</p> <pre style="margin-left: 250px;">1. declare %rest:path('/monAppli') <br clear="none">2. %output:method('xhtml') <br clear="none">3. function isilex:monAppli()<br clear="none">4. { <br clear="none">5. isi:template('Hello World') <br clear="none">6. }; </pre> <p>Et c'est tout. Une fois sauvé, on ouvre son application à l'adresse http://localhost:8984/monAppli et ... magie: l'application est disponible.</p> <h1>XQM ?</h1> <p>Le développement de nouvelles fonctions XQM est très documenté sur le web. On trouvera à l'adresse&nbsp;<a shape="rect" href="http://docs.basex.org/wiki/Repository">http://docs.basex.org/wiki/Repository</a>&nbsp;la description du format des URL attendues par Basex. Le fichier additional.xqm contient un exemple très simple de fonction. L'idée générale, si on ne connaît pas le principe, consiste à déclarer une URL sur son site et à la lier à une fonction qui "fait des choses" sur les bases de données XML.</p> <p>&nbsp;</p> <h1 id="fonctionsReady">Les fonctions prêtes-à-l'emploi</h1> <p>Il existe trois fonctions prêtes à l'emploi dans Isilex, qui permettent de créer un affichage de page en un clic, de rendre accessible un texte traduit et de valider une fiche au format XSD enregistré.</p> <pre>isi:template($contenu)</pre> <p>(lire en l’occurrence, la fonction nommée «&nbsp;template&nbsp;» au sein de l’espace de nommage «&nbsp;isi&nbsp;» de l’application Isilex qui reçoit une variable dénommée «&nbsp;$contenu&nbsp;» sous forme d’un fragment XHTML) permet de créer automatiquement un affichage au format CSS du site incluant toutes les bibliothèques nécessaires. &nbsp;;</p> <pre>isi:lang-text($text)</pre> <p>(lire ici, la fonction nommée «&nbsp;lang-text&nbsp;» au sein de l’espace de nommage «&nbsp;isi&nbsp;» de l’application Isilex qui reçoit une variable dénommée «&nbsp;$text&nbsp;» sous forme d’une chaîne de caractères) permet de renvoyer un texte dans la langue du site (français ou anglais par défaut) pour peu que la variable équivalente existe dans le tableau de configuration du site&nbsp;;</p> <pre>isi:validateXML($fiche)</pre> <p>permet de tester et de récupérer les erreurs d’une fiche XML (ici nommée «&nbsp;$fiche&nbsp;» en tant que fragment XML) au regard du schéma de contrainte défini dans la&nbsp; base XSD.</p> <p>
                  <a shape="rect" href="#addFunctx">Comment ajouter des fonctions ?</a>
                </p> <p>&nbsp;</p> <p>&nbsp;</p> <p>&nbsp;</p> </div>
            
          </div>